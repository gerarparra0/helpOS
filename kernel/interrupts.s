%macro INTERRUPT_NOERROR 1
[global interrupt%1]
interrupt%1:
    cli
    push qword 0
    push qword %1
    jmp isr_stub
%endmacro

%macro INTERRUPT_ERROR 1
[global interrupt%1]
interrupt%1:
    cli
    push qword %1
    jmp isr_stub
%endmacro

INTERRUPT_NOERROR 0
INTERRUPT_NOERROR 1
INTERRUPT_NOERROR 2
INTERRUPT_NOERROR 3
INTERRUPT_NOERROR 4
INTERRUPT_NOERROR 5
INTERRUPT_NOERROR 6
INTERRUPT_NOERROR 7
INTERRUPT_ERROR 8
INTERRUPT_NOERROR 9
INTERRUPT_ERROR 10
INTERRUPT_ERROR 11
INTERRUPT_ERROR 12
INTERRUPT_ERROR 13
INTERRUPT_ERROR 14
INTERRUPT_NOERROR 15
INTERRUPT_NOERROR 16
INTERRUPT_ERROR 17
INTERRUPT_NOERROR 18
INTERRUPT_NOERROR 19
INTERRUPT_NOERROR 20
INTERRUPT_NOERROR 21
INTERRUPT_NOERROR 22
INTERRUPT_NOERROR 23
INTERRUPT_NOERROR 24
INTERRUPT_NOERROR 25
INTERRUPT_NOERROR 26
INTERRUPT_NOERROR 27
INTERRUPT_NOERROR 28
INTERRUPT_NOERROR 29
INTERRUPT_NOERROR 30
INTERRUPT_NOERROR 31

extern interrupt_handler
isr_stub:

    pushfq
    call interrupt_handler

    add rsp, 24

    sti
    iret

